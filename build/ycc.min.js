!function(a){a.Ycc=function b(a,c){this.canvasDom=a,this.ctx=a.getContext("2d"),this.ctxWidth=a.width,this.ctxHeight=a.height,this.options=c||{},this.ui=new b.UI(this),this.photoManager=new b.PhotoManager(this),this.eventManager=new b.EventManager(this),this.init()},a.Ycc.prototype.init=function(){this.ctx.fillStyle=this.options.canvasBg||"#fff",this.ctx.fillRect(0,0,this.ctxWidth,this.ctxHeight)}}(window),function(a){a.Ycc.init={settings:{canvasBg:"#fff",font:"12px Arial",lineWidth:1,strokeStyle:"#CC0000",fillStyle:"#CC0000"}}}(window),function(a){a.utils={},a.utils.inherits=function(a,b){function c(){d.isFn(b)&&b.call(this,""),a.call(this,"")}var d=this;return c.prototype=a.prototype,c},a.utils.extend=function(a,b,c){var d={};c&&(b=deepClone(b));for(var e in a)d[e]=a[e],b&&null!=b[e]&&(d[e]=b[e]);return d},a.utils.isString=function(a){return"string"==typeof a},a.utils.isNum=function(a){return"number"==typeof a},a.utils.isObj=function(a){return"object"==typeof a},a.utils.isFn=function(a){return"function"==typeof a},a.utils.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.utils.isDot=function(a){return this.isArray(a)&&2==a.length},a.utils.isDotList=function(a){if(a&&this.isArray(a)){for(var b=0;b<a.length;b++)if(!this.isDot(a[b]))return!1;return!0}return!1},a.utils.dotAddDot=function(a,b){if(!this.isArray(a)||!this.isArray(b))return console.log("%c Function addOffset params wrong","color:red"),a;if(a.length!==b.length)return console.log("%c Function addOffset params arr.length must equal offset.length","color:red"),a;for(var c=a.slice(0),d=0;d<b.length;d++)c[d]+=b[d];return c},a.utils.dotsMatchAxis=function(a,b,c){for(var d=a.slice(0),e=0;e<a.length;e++)d[e][0]*=b,d[e][1]*=c;return d},a.utils.deepClone=function(b){function c(b){var e={};for(var f in b)e[f]=b[f],a.utils.isArray(b[f])?e[f]=d(b[f]):a.utils.isObj(b[f])?e[f]=c(b[f]):e[f]=b[f];return e}function d(b){for(var e=[],f=null,g=0;g<b.length;g++)f=b[g],a.utils.isArray(f)?e.push(d(f)):a.utils.isObj(f)?e.push(c(f)):e.push(f);return e}return a.utils.isArray(b)?d(b):c(b)}}(Ycc),function(a,b){function c(a,c){this.parent=o,this.parents=[],this.children=[],this._hold_rect={left:0,top:0,width:0,height:0},this._be_hold_info={lastMaxHeight:0,maxHeight:0,left2right:0,right2left:0},this._innerText=null,this.attrs={},this.attrs.id="",this.attrs["class"]="",this.style={},this.style.display="block",this.style["float"]="none",this.style.position="absolute",this.style.top=0,this.style.bottom=0,this.style.left=0,this.style.right=0,this.style.width=0,this.style.height=0,this.style.borderColor="#000",this.style.borderWidth=0,this.style.borderTopWidth=0,this.style.borderRightWidth=0,this.style.borderBottomWidth=0,this.style.borderLeftWidth=0,this.style.padding=0,this.style.paddingTop=0,this.style.paddingRight=0,this.style.paddingBottom=0,this.style.paddingLeft=0,this.style.margin=0,this.style.marginTop=0,this.style.marginRight=0,this.style.marginBottom=0,this.style.marginLeft=0,this.style.backgroundColor=null,this.style.fontSize=16,this.style.color="#000",this.style.fontFamily="Arial",this.style.overflow="",this.style.overflowX="",this.style.overflowY="auto",b.isObj(a)&&(this.style=b.extend(this.style,a)),b.isObj(c)&&(this.attrs=b.extend(this.attrs,c)),this.tagName="div",this.layer=1,this.node_id=Math.random().toString(16).replace("0.",this.layer+".")}function d(){return o}function e(b){b.layer=this.layer+1,b.node_id=Math.random().toString(16).replace("0.",b.layer+"."),b.parent=this,b.parents=this.parents.slice(0),b.parents.push(this),this.children.push(b),a.Node.nodeList.push(b),a.Node.nodeMap[b.node_id]=b}function f(b){var c=this.children.indexOf(b);this.children.splice(c,1),a.Node.nodeMap[b]=null,delete a.Node.nodeMap[b],a.Node.nodeList=[];for(var d in a.Node.nodeMap)a.Node.nodeList.push(d)}function g(a){var c={},d=0;for(var e in a)b.isFn(e)||(d++,c[e]=a[e]);return 0==d&&(c=null),c}function h(){for(var b=[],c=0;c<a.Node.nodeList.length;c++)b.push(a.Node.nodeList[c]);return b}function i(){var a="div",d=null,e=null;2==arguments.length?(d=b.deepClone(arguments[0]),e=b.deepClone(arguments[1])):3==arguments.length?(a=arguments[0],d=b.deepClone(arguments[1]),e=b.deepClone(arguments[2])):1==arguments.length&&(d=b.deepClone(arguments[0]));var f=new c;return f.tagName=a,b.isObj(d)&&(f.style=b.extend(f.style,d)),b.isObj(e)&&(f.attrs=b.extend(f.attrs,e)),f}function j(a){var b=new c;return b.tagName="_innerText",b._innerText=a,b.display="inline",b}function k(a){n=a}function l(a,b){var c=a.tagName,d=a.style;"img"==c?d.padding=0:"_innerText"==c&&(d.padding=0,d.margin=0,d.border=0)}function m(a){for(var b in a){var c=a[b],d=c.style,e=c._hold_rect,f=c.parents,g=c.parent,h=null,i=null;if(g)if(l(c,g),h=g._be_hold_info,i=g._hold_rect,d.borderWidth&&(d.borderTopWidth=d.borderBottomWidth=d.borderLeftWidth=d.borderRightWidth=d.borderWidth),d.padding&&(d.paddingLeft=d.paddingTop=d.paddingRight=d.paddingBottom=d.padding),d.margin&&(d.marginLeft=d.marginTop=d.marginRight=d.marginBottom=d.margin),""!=d.overflow&&(d.overflowX=d.overflowY=d.overflow),"fixed"!=d.position)if("absolute"!=d.position){var j=null,k=null,m=null;if("none"==d["float"]&&"block"==d.display?(e.left=d.left+d.marginLeft+i.left+g.style.paddingLeft+g.style.borderLeftWidth,e.top=d.top+d.marginTop+h.maxHeight+i.top+g.style.paddingTop+g.style.borderTopWidth,e.width=d.width+d.borderLeftWidth+d.borderRightWidth+d.paddingLeft+d.paddingRight,e.height=d.height+d.borderTopWidth+d.borderBottomWidth+d.paddingTop+d.paddingBottom,h.maxHeight+=d.marginTop+d.marginBottom+e.height,h.left2right=0,h.right2left=0):"none"==d["float"]&&"inline"==d.display||"left"==d["float"]?(j=g.style.width-h.left2right-h.right2left,e.left=h.left2right+d.left+d.marginLeft+i.left+g.style.borderLeftWidth+g.style.paddingLeft,e.top=d.top+d.marginTop,e.width=d.width+d.borderLeftWidth+d.borderRightWidth+d.paddingLeft+d.paddingRight,e.height=d.height+d.borderTopWidth+d.borderBottomWidth+d.paddingTop+d.paddingBottom,k=e.width+d.marginLeft+d.marginRight,m=e.height+d.marginTop+d.marginBottom,j<e.width+d.marginLeft+d.marginRight?(h.lastMaxHeight=h.maxHeight,e.top=h.lastMaxHeight+d.top+d.marginTop+i.top+g.style.borderTopWidth+g.style.paddingTop,e.left=d.left+d.marginLeft+i.left+g.style.borderLeftWidth+g.style.paddingLeft,h.left2right=k,h.right2left=0,h.maxHeight=h.lastMaxHeight+m):(h.maxHeight=h.lastMaxHeight+m>h.maxHeight?h.lastMaxHeight+m:h.maxHeight,h.left2right+=d.marginLeft+d.marginRight+e.width,e.top=h.lastMaxHeight+d.top+d.marginTop+i.top+g.style.borderTopWidth+g.style.paddingTop)):"right"==d["float"]&&(j=g.style.width-h.left2right-h.right2left,e.width=d.width+d.borderLeftWidth+d.borderRightWidth+d.paddingLeft+d.paddingRight,e.height=d.height+d.borderTopWidth+d.borderBottomWidth+d.paddingTop+d.paddingBottom,e.left=h.right2left+d.marginRight+e.width,e.top=d.top+d.marginTop,k=e.width+d.marginLeft+d.marginRight,m=e.height+d.marginTop+d.marginBottom,j<e.width+d.marginLeft+d.marginRight?(h.lastMaxHeight=h.maxHeight,e.top=h.lastMaxHeight+d.top+d.marginTop+i.top+g.style.borderTopWidth+g.style.paddingTop,e.left=g.style.width+i.left+g.style.borderLeftWidth+g.style.paddingLeft-(k-d.marginLeft),h.right2left=k,h.left2right=0,h.maxHeight=h.lastMaxHeight+m):(h.maxHeight=h.lastMaxHeight+m>h.maxHeight?h.lastMaxHeight+m:h.maxHeight,e.top=h.lastMaxHeight+d.top+d.marginTop+i.top+g.style.borderTopWidth+g.style.paddingTop,e.left=g.style.width+i.left+g.style.borderLeftWidth+g.style.paddingLeft-(h.right2left+k-d.marginLeft),h.right2left+=k)),"auto"==g.style.overflowY)for(var o=f.length-1;o>-1;o--){g=f[o];var p=f[o-1];if(g._be_hold_info.maxHeight>g.style.height){var q=g._be_hold_info.maxHeight-g.style.height;if(g.style.height=h.maxHeight,g._hold_rect.height+=q,p&&"auto"==p.style.overflowY){var r=p._be_hold_info.lastMaxHeight+g._hold_rect.height+g.style.marginTop+g.style.marginBottom;r>p._be_hold_info.maxHeight&&(p._hold_rect.height+=r-p._be_hold_info.maxHeight,p._be_hold_info.maxHeight=r)}}}}else e.left=d.left+i.left+g.style.paddingLeft+g.style.borderLeftWidth+d.marginLeft,e.top=d.top+i.top+g.style.paddingTop+g.style.borderTopWidth+d.marginTop,e.width=d.width+d.borderLeftWidth+d.borderRightWidth+d.paddingLeft+d.paddingRight,e.height=d.height+d.borderTopWidth+d.borderBottomWidth+d.paddingTop+d.paddingBottom;else e.left=d.left,e.top=d.top,e.width=d.width+d.borderLeftWidth+d.borderRightWidth+d.paddingLeft+d.paddingRight,e.height=d.height+d.borderTopWidth+d.borderBottomWidth+d.paddingTop+d.paddingBottom;else d.width=n.canvas.width,d.height=n.canvas.height,c._hold_rect.height=n.canvas.height}return a}a.Node=c,a.Node.nodeList=[],a.Node.nodeMap={},a.Node.getRoot=d,a.Node.init=k,a.Node.createNode=i,a.Node.createTextNode=j,a.Node.get_node_attr=g,a.Node.get_node_list_attr=h,a.Node.compute_hold_rect=m;var n={},o=new c({},{id:"root"});o.node_id=1,a.Node.nodeList.push(o),a.Node.nodeMap[o.node_id]=o;var p=a.Node.prototype;p.add_child=e,p.del_child=f}(Ycc,Ycc.utils),function(a,b){function c(a){function b(){d.backgroundColor&&(e[0]=d.borderLeftWidth+a._hold_rect.left,e[1]=d.borderTopWidth+a._hold_rect.top,f[0]=e[0]+d.paddingLeft+d.paddingRight+d.width,f[1]=e[1]+d.paddingTop+d.paddingBottom+d.height,g.fillStyle=d.backgroundColor,n(e,f,g))}function c(b,c){if(b.borderWidth>0&&b.borderColor)e[0]=b.borderLeftWidth/2+a._hold_rect.left,e[1]=b.borderTopWidth/2+a._hold_rect.top,f[0]=e[0]+b.paddingLeft+b.borderRightWidth+b.paddingRight+b.width,f[1]=e[1]+b.paddingTop+b.borderBottomWidth+b.paddingBottom+b.height,c.lineWidth=b.borderWidth,c.strokeStyle=b.borderColor,m(e,f,c);else{var d=b.width+b.paddingLeft+b.paddingRight,g=b.height+b.paddingTop+b.paddingBottom;c.strokeStyle=b.borderTopColor,c.lineWidth=b.borderTopWidth,j([a._hold_rect.left,a._hold_rect.top+b.borderTopWidth/2],d+b.borderLeftWidth,!0,c),c.lineWidth=b.borderLeftWidth,c.strokeStyle=b.borderLeftColor,j([a._hold_rect.left+b.borderLeftWidth/2,a._hold_rect.top+b.borderTopWidth],g+b.borderBottomWidth,!1,c),c.lineWidth=b.borderBottomWidth,c.strokeStyle=b.borderBottomColor,j([a._hold_rect.left+b.borderLeftWidth,a._hold_rect.top+b.height+b.borderTopWidth+b.borderBottomWidth/2],d+b.borderRightWidth,!0,c),c.lineWidth=b.borderRightWidth,c.strokeStyle=b.borderRightColor,j([a._hold_rect.left+d+b.borderLeftWidth+b.borderRightWidth/2,a._hold_rect.top],g+b.borderTopWidth,!1,c)}}var d=a.style;d.borderWidth&&(d.borderTopWidth=d.borderBottomWidth=d.borderLeftWidth=d.borderRightWidth=d.borderWidth),d.borderColor&&(d.borderTopColor=d.borderBottomColor=d.borderLeftColor=d.borderRightColor=d.borderColor),d.padding&&(d.paddingLeft=d.paddingTop=d.paddingRight=d.paddingBottom=d.padding);var e=[],f=[],g={};!function(){var b=a.parent;if(!b)return null;var c=b._hold_rect,d=b.style;if("hidden"!=d.overflow)return console.log(b.attrs),null;var e=c.left+d.borderLeftWidth+d.paddingLeft,f=e+d.width,g=c.top+d.borderTopWidth+d.paddingTop,h=g+d.height;u.beginPath(),u.moveTo(e,g),u.lineTo(e,h),u.lineTo(f,h),u.lineTo(f,g),u.lineTo(e,g),u.closePath(),u.clip()}(),c(d,g),b()}function d(a){for(var b=e(a),d=0;d<b.length;d++)switch(c(b[d]),b[d].tagName){case"div":break;case"img":break;case"_innerText":f(b[d],a)}}function e(a){for(var b=(a[1],[]),c=Object.keys(a).sort(),d=0;d<c.length;d++)b[d]=a[c[d]];return b}function f(a,b){var c=a.parent,d=a._innerText,e=c.style,f=c._hold_rect,g=f.left+e.borderLeftWidth+e.paddingLeft,i=f.top+e.borderTopWidth+e.paddingTop;console.log(e);var j=e.fontSize,k=e.fontFamily,l=e.color;u.font=j+"px "+k;for(var m=0,n=0;n<d.length;n++){var o=d[n],p=u.measureText(o).width;m+p>e.width&&(m=0,i+=j,g=f.left+e.borderLeftWidth+e.paddingLeft),h(o,{x:g,y:i,fontSize:j,fontFamily:k,fillStyle:l}),m+=p,g+=p}}function g(a,b){if(!r(a)&&!s(a))return console.log("%cFunction drawFont need param 1 to be string or number","color:red"),!1;u.save();var c={x:0,y:0,textAlign:"left",textBaseline:"top",fontSize:16,fontFamily:"Arial",lineWidth:1,strokeStyle:"#000"};b=b&&t(b)?q(c,b):c;var d=[b.x,b.y];return u.textAlign=b.textAlign,u.textBaseline=b.textBaseline,u.font=b.fontSize+"px "+b.fontFamily,u.strokeStyle=b.strokeStyle,u.strokeText(a,d[0],d[1]),u.restore(),this}function h(a,b){if(!r(a)&&!s(a))return console.log("%cFunction drawFont need param 1 to be string or number","color:red"),!1;u.save();var c={x:0,y:0,textAlign:"left",textBaseline:"top",fontSize:16,fontFamily:"Arial",lineWidth:1,strokeStyle:"#000",fillStyle:"#000"};b=b&&t(b)?q(c,b):c;var d=[b.x,b.y];return u.textAlign=b.textAlign,u.textBaseline=b.textBaseline,u.font=b.fontSize+"px "+b.fontFamily,u.fillStyle=b.fillStyle,u.fillText(a,d[0],d[1]),u.restore(),this}function i(a,b,c){u.save();var d={strokeStyle:"#000",lineWidth:1};c=q(d,c);var e=a,f=b;return u.beginPath(),u.moveTo(e[0],e[1]),u.lineTo(f[0],f[1]),u.strokeStyle=c.strokeStyle,u.lineWidth=c.lineWidth,u.stroke(),u.closePath(),u.restore(),this}function j(a,b,c,d){u.save();var e={strokeStyle:"#000",lineWidth:0};return d=q(e,d),0==d.lineWidth?this:(u.beginPath(),u.moveTo(a[0],a[1]),c?u.lineTo(a[0]+b,a[1]):u.lineTo(a[0],a[1]+b),u.strokeStyle=d.strokeStyle,u.lineWidth=d.lineWidth,u.stroke(),u.closePath(),u.restore(),this)}function k(a){var b={x:10,y:10,startAngle:0,endAngle:360,direction:!0,radius:10,strokeStyle:"#000",close:!1},c=q(b,a);u.strokeStyle=c.strokeStyle,u.save(),u.beginPath(),c.close&&u.moveTo(c.x,c.y),u.arc(c.x,c.y,c.radius,c.startAngle/180*Math.PI,c.endAngle/180*Math.PI,c.direction),c.close&&u.lineTo(c.x,c.y),u.stroke(),u.closePath(),u.restore()}function l(a){var b={x:10,y:10,startAngle:0,endAngle:360,direction:!0,radius:10,fillStyle:"#000",close:!1},c=q(b,a);u.strokeStyle=c.strokeStyle,u.save(),u.beginPath(),c.close||u.moveTo(c.x,c.y),u.arc(c.x,c.y,c.radius,c.startAngle/180*Math.PI,c.endAngle/180*Math.PI,c.direction),u.fill(),u.closePath(),u.restore()}function m(a,b,c){var d={strokeStyle:"#000",lineWidth:1},e=q(d,c);u.strokeStyle=e.strokeStyle,u.lineWidth=e.lineWidth,u.save(),u.beginPath(),u.rect(a[0],a[1],b[0]-a[0],b[1]-a[1]),u.stroke(),u.closePath(),u.restore()}function n(a,b,c){var d={fillStyle:"#000"},e=q(d,c);u.fillStyle=e.fillStyle,u.save(),u.beginPath(),u.rect(a[0],a[1],b[0]-a[0],b[1]-a[1]),u.fill(),u.closePath(),u.restore()}function o(a,b,c){var d={onDrawed:function(){},width:0,height:0},e=q(d,c),f=new Image;f.src=a,f.onload=function(){var a=1,c=1;e.width&&e.height?(a=e.width/f.width,c=e.height/f.height):e.width&&!e.height?a=c=e.width/f.width:!e.width&&e.height&&(a=c=e.height/f.height),u.save(),u.scale(a,c),u.beginPath(),u.drawImage(f,b[0]/a,b[1]/c),u.closePath(),u.restore(),e.onDrawed(f)}}function p(){u.save(),u.fillStyle=a.init.settings.canvasBg,u.fillRect(0,0,v,w),u.restore()}var q=b.extend,r=b.isString,s=b.isNum,t=b.isObj,u=(b.isFn,b.isArray,b.isDot,null),v=null,w=null;a.painter=function(a,b,c){u=a,v=b,w=c},a.painter.stroke_line=i,a.painter.stroke_font=g,a.painter.fill_font=h,a.painter.stroke_circle=k,a.painter.fill_circle=l,a.painter.stroke_rect=m,a.painter.fill_rect=n,a.painter.draw_image=o,a.painter.clear=p,a.painter.paint_bgColor_and_border=c,a.painter.render=d}(Ycc,Ycc.utils),function(a,b,c){function d(b,d,e){function f(){b.save(),b.fillStyle=a.init.settings.canvasBg,b.fillRect(0,0,d,e),b.restore(),c(b,d,e)}return j=b,k=d,l=e,b&&d&&e?(this.init=f,this.init(),this.clear=function(){b.save(),b.fillStyle=a.init.settings.canvasBg,b.fillRect(0,0,d,e),b.restore()},this.getTextW=function(a){return b.measureText(a).width},void(this.render=h)):(console.log("%cCan not get the id","color:red"),!1)}function e(a,b){return b?i(n[a]):n[a]}function f(a,b){var c=null,d=n[a].parents,e=d.length;return e>0&&(c=b?i(d[e-1]):d[e-1]),c}function g(a,b){var c=[];for(var d in n)d.tagName==a&&(b?c.push(i(d)):c.push(d));return c}function h(a,b){m=b,n=a,c.render(a)}var i=(b.extend,b.deepClone),j=(b.isString,b.isNum,b.isObj,b.isFn,b.isArray,b.isDot,null),k=null,l=null,m=0,n={};a.App=d,a.App.getNodeAttrById=e,a.App.getNodeAttrByTagName=g,a.App.getNodeAttrById=e,a.App.getNodeAttrById=e,a.App.getPatentAttr=f}(Ycc,Ycc.utils,Ycc.painter);
//# sourceMappingURL=ycc.min.js.map