var Ycc=window.Ycc=function(){};Ycc.settings={canvasBg:"#fff",font:"12px Arial",lineWidth:1,strokeStyle:"#CC0000",fillStyle:"#CC0000"},function(a){function b(a){function b(a){return"object"==typeof a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){var f={};for(var g in a)f[g]=a[g],c(a[g])?f[g]=e(a[g]):b(a[g])?f[g]=d(a[g]):f[g]=a[g];return f}function e(a){for(var f=[],g=null,h=0;h<a.length;h++)g=a[h],c(g)?f.push(e(g)):b(g)?f.push(d(g)):f.push(g);return f}return c(a)?e(a):d(a)}a.utils={},a.utils.inherits=function(a,b){function c(){d.isFn(b)&&b.call(this,""),a.call(this,"")}var d=this;return c.prototype=a.prototype,c},a.utils.extend=function(a,c,d){var e={};d&&(c=b(c));for(var f in a)e[f]=a[f],c&&null!=c[f]&&(e[f]=c[f]);return e},a.utils.isString=function(a){return"string"==typeof a},a.utils.isNum=function(a){return"number"==typeof a},a.utils.isObj=function(a){return"object"==typeof a},a.utils.isFn=function(a){return"function"==typeof a},a.utils.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.utils.isDot=function(a){return this.isArray(a)&&2==a.length},a.utils.isDotList=function(a){if(a&&this.isArray(a)){for(var b=0;b<a.length;b++)if(!this.isDot(a[b]))return!1;return!0}return!1},a.utils.dotAddDot=function(a,b){if(!this.isArray(a)||!this.isArray(b))return console.log("%c Function addOffset params wrong","color:red"),a;if(a.length!==b.length)return console.log("%c Function addOffset params arr.length must equal offset.length","color:red"),a;for(var c=a.slice(0),d=0;d<b.length;d++)c[d]+=b[d];return c},a.utils.dotsMatchAxis=function(a,b,c){for(var d=a.slice(0),e=0;e<a.length;e++)d[e][0]*=b,d[e][1]*=c;return d},a.utils.deepClone=b}(Ycc),function(a,b){function c(a,c){this.parents=[],this.children=[],this._hold_rect={left:0,top:0,width:0,height:0},this._be_hold_info={lastMaxHeight:0,maxHeight:0,left2right:0,right2left:0},this._innerText=null,this.attrs={},this.style={},this.style.display="block",this.style["float"]="none",this.style.position="absolute",this.style.top=0,this.style.bottom=0,this.style.left=0,this.style.right=0,this.style.width=0,this.style.height=0,this.style.borderColor="#000",this.style.borderWidth=0,this.style.borderTopWidth=0,this.style.borderRightWidth=0,this.style.borderBottomWidth=0,this.style.borderLeftWidth=0,this.style.padding=0,this.style.paddingTop=0,this.style.paddingRight=0,this.style.paddingBottom=0,this.style.paddingLeft=0,this.style.margin=0,this.style.marginTop=0,this.style.marginRight=0,this.style.marginBottom=0,this.style.marginLeft=0,this.style.backgroundColor=null,this.style.fontSize=16,this.style.color="#000",this.style.fontFamily="Arial",this.style.overflow=null,this.style.overflowX=null,this.style.overflowY="auto",b.isObj(a)&&(this.style=b.extend(this.style,a)),b.isObj(c)&&(this.attrs=b.extend(this.attrs,c))}function d(){var b=new c;return a.Node.nodeList.push(b),a.Node.nodeMap[b.node_id]=b,b}function e(b){b.layer=this.layer+1,b.node_id=Math.random().toString(16).replace("0.",b.layer+"."),b.parents=this.parents.slice(0),b.parents.push(this.node_id),this.children.push(b.node_id),a.Node.nodeList.push(b),a.Node.nodeMap[b.node_id]=b}function f(b){var c=this.children.indexOf(b);this.children.splice(c,1),a.Node.nodeMap[b]=null,delete a.Node.nodeMap[b],a.Node.nodeList=[];for(var d in a.Node.nodeMap)a.Node.nodeList.push(d)}function g(a){var c={},d=0;for(var e in a)b.isFn(e)||(d++,c[e]=a[e]);return 0==d&&(c=null),c}function h(){for(var b=[],c=0;c<a.Node.nodeList.length;c++)b.push(a.Node.nodeList[c]);return b}function i(){var a="div",d=null,e=null;2==arguments.length?(d=b.deepClone(arguments[0]),e=b.deepClone(arguments[1])):3==arguments.length?(a=arguments[0],d=b.deepClone(arguments[1]),e=b.deepClone(arguments[2])):1==arguments.length&&(d=b.deepClone(arguments[0]));var f=new c;return f.tagName=a,b.isObj(d)&&(f.style=b.extend(f.style,d)),b.isObj(e)&&(f.attrs=b.extend(f.attrs,e)),f}function j(a){var b=new c;return b.tagName="_innerText",b._innerText=a,b.display="inline",b}a.Node=c,a.Node.nodeList=[],a.Node.nodeMap={},a.Node.getRoot=d,a.Node.createNode=i,a.Node.createTextNode=j,a.Node.get_node_attr=g,a.Node.get_node_list_attr=h;var k=a.Node.prototype;k.tagName="div",k.layer=1,k.node_id=Math.random().toString(16).replace("0.",k.layer+"."),k.add_child=e,k.del_child=f}(Ycc,Ycc.utils),function(a){function b(a,b){f=a,g=b}function c(a,b){var c=a.tagName,d=a.style;"img"==c?d.padding=0:"_innerText"==c&&(d.padding=0,d.margin=0,d.border=0)}function d(a){for(var b in a){var d=a[b],h=d.style,i=d._hold_rect,j=e(b,a),k=j[j.length-1],l=null,m=null;if(k)if(c(d,k),l=k._be_hold_info,m=k._hold_rect,h.borderWidth&&(h.borderTopWidth=h.borderBottomWidth=h.borderLeftWidth=h.borderRightWidth=h.borderWidth),h.padding&&(h.paddingLeft=h.paddingTop=h.paddingRight=h.paddingBottom=h.padding),h.margin&&(h.marginLeft=h.marginTop=h.marginRight=h.marginBottom=h.margin),h.overflow&&(h.overflowX=h.overflowY=h.overflow),"fixed"!=h.position)if("absolute"!=h.position){var n=null,o=null,p=null;if("none"==h["float"]&&"block"==h.display?(i.left=h.left+h.marginLeft+m.left+k.style.paddingLeft+k.style.borderLeftWidth,i.top=h.top+h.marginTop+l.maxHeight+m.top+k.style.paddingTop+k.style.borderTopWidth,i.width=h.width+h.borderLeftWidth+h.borderRightWidth+h.paddingLeft+h.paddingRight,i.height=h.height+h.borderTopWidth+h.borderBottomWidth+h.paddingTop+h.paddingBottom,l.maxHeight+=h.marginTop+h.marginBottom+i.height,l.left2right=0,l.right2left=0):"none"==h["float"]&&"inline"==h.display||"left"==h["float"]?(n=k.style.width-l.left2right-l.right2left,i.left=l.left2right+h.left+h.marginLeft+m.left+k.style.borderLeftWidth+k.style.paddingLeft,i.top=h.top+h.marginTop,i.width=h.width+h.borderLeftWidth+h.borderRightWidth+h.paddingLeft+h.paddingRight,i.height=h.height+h.borderTopWidth+h.borderBottomWidth+h.paddingTop+h.paddingBottom,o=i.width+h.marginLeft+h.marginRight,p=i.height+h.marginTop+h.marginBottom,n<i.width+h.marginLeft+h.marginRight?(l.lastMaxHeight=l.maxHeight,i.top=l.lastMaxHeight+h.top+h.marginTop+m.top+k.style.borderTopWidth+k.style.paddingTop,i.left=h.left+h.marginLeft+m.left+k.style.borderLeftWidth+k.style.paddingLeft,l.left2right=o,l.right2left=0,l.maxHeight=l.lastMaxHeight+p):(l.maxHeight=l.lastMaxHeight+p>l.maxHeight?l.lastMaxHeight+p:l.maxHeight,l.left2right+=h.marginLeft+h.marginRight+i.width,i.top=l.lastMaxHeight+h.top+h.marginTop+m.top+k.style.borderTopWidth+k.style.paddingTop)):"right"==h["float"]&&(n=k.style.width-l.left2right-l.right2left,i.width=h.width+h.borderLeftWidth+h.borderRightWidth+h.paddingLeft+h.paddingRight,i.height=h.height+h.borderTopWidth+h.borderBottomWidth+h.paddingTop+h.paddingBottom,i.left=l.right2left+h.marginRight+i.width,i.top=h.top+h.marginTop,o=i.width+h.marginLeft+h.marginRight,p=i.height+h.marginTop+h.marginBottom,n<i.width+h.marginLeft+h.marginRight?(l.lastMaxHeight=l.maxHeight,i.top=l.lastMaxHeight+h.top+h.marginTop+m.top+k.style.borderTopWidth+k.style.paddingTop,i.left=k.style.width+m.left+k.style.borderLeftWidth+k.style.paddingLeft-(o-h.marginLeft),l.right2left=o,l.left2right=0,l.maxHeight=l.lastMaxHeight+p):(l.maxHeight=l.lastMaxHeight+p>l.maxHeight?l.lastMaxHeight+p:l.maxHeight,i.top=l.lastMaxHeight+h.top+h.marginTop+m.top+k.style.borderTopWidth+k.style.paddingTop,i.left=k.style.width+m.left+k.style.borderLeftWidth+k.style.paddingLeft-(l.right2left+o-h.marginLeft),l.right2left+=o)),"auto"==k.style.overflowY)for(var q=j.length-1;q>-1;q--){var k=j[q],r=j[q-1];if(k._be_hold_info.maxHeight>k.style.height){var s=k._be_hold_info.maxHeight-k.style.height;if(k.style.height=l.maxHeight,k._hold_rect.height+=s,r&&"auto"==r.style.overflowY){var t=r._be_hold_info.lastMaxHeight+k._hold_rect.height+k.style.marginTop+k.style.marginBottom;t>r._be_hold_info.maxHeight&&(r._hold_rect.height+=t-r._be_hold_info.maxHeight,r._be_hold_info.maxHeight=t)}}}}else i.left=h.left+m.left+k.style.paddingLeft+k.style.borderLeftWidth+h.marginLeft,i.top=h.top+m.top+k.style.paddingTop+k.style.borderTopWidth+h.marginTop,i.width=h.width+h.borderLeftWidth+h.borderRightWidth+h.paddingLeft+h.paddingRight,i.height=h.height+h.borderTopWidth+h.borderBottomWidth+h.paddingTop+h.paddingBottom;else i.left=h.left,i.top=h.top,i.width=h.width+h.borderLeftWidth+h.borderRightWidth+h.paddingLeft+h.paddingRight,i.height=h.height+h.borderTopWidth+h.borderBottomWidth+h.paddingTop+h.paddingBottom;else h.width=f,h.height=g,d._hold_rect.height=g}return a}function e(a,b){var c=[],d=b[a].parents,e=d.length;if(e>0)for(var f=0;e>f;f++)c.push(b[d[f]]);return c}a.nodeAttr=function(){};var f=null,g=null;a.nodeAttr.init=b,a.nodeAttr.compute_hold_rect=d}(Ycc),function(a,b){function c(a){function b(b,c){if(b.borderWidth>0&&b.borderColor)d[0]=b.borderLeftWidth/2+a._hold_rect.left,d[1]=b.borderTopWidth/2+a._hold_rect.top,e[0]=d[0]+b.paddingLeft+b.borderRightWidth+b.paddingRight+b.width,e[1]=d[1]+b.paddingTop+b.borderBottomWidth+b.paddingBottom+b.height,c.lineWidth=b.borderWidth,c.strokeStyle=b.borderColor,m(d,e,c);else{var f=b.width+b.paddingLeft+b.paddingRight,g=b.height+b.paddingTop+b.paddingBottom;c.strokeStyle=b.borderTopColor,c.lineWidth=b.borderTopWidth,j([a._hold_rect.left,a._hold_rect.top+b.borderTopWidth/2],f+b.borderLeftWidth,!0,c),c.lineWidth=b.borderLeftWidth,c.strokeStyle=b.borderLeftColor,j([a._hold_rect.left+b.borderLeftWidth/2,a._hold_rect.top+b.borderTopWidth],g+b.borderBottomWidth,!1,c),c.lineWidth=b.borderBottomWidth,c.strokeStyle=b.borderBottomColor,j([a._hold_rect.left+b.borderLeftWidth,a._hold_rect.top+b.height+b.borderTopWidth+b.borderBottomWidth/2],f+b.borderRightWidth,!0,c),c.lineWidth=b.borderRightWidth,c.strokeStyle=b.borderRightColor,j([a._hold_rect.left+f+b.borderLeftWidth+b.borderRightWidth/2,a._hold_rect.top],g+b.borderTopWidth,!1,c)}}var c=a.style;c.borderWidth&&(c.borderTopWidth=c.borderBottomWidth=c.borderLeftWidth=c.borderRightWidth=c.borderWidth),c.borderColor&&(c.borderTopColor=c.borderBottomColor=c.borderLeftColor=c.borderRightColor=c.borderColor),c.padding&&(c.paddingLeft=c.paddingTop=c.paddingRight=c.paddingBottom=c.padding);var d=[],e=[],f={};d[0]=c.borderLeftWidth+a._hold_rect.left,d[1]=c.borderTopWidth+a._hold_rect.top,e[0]=d[0]+c.paddingLeft+c.paddingRight+c.width,e[1]=d[1]+c.paddingTop+c.paddingBottom+c.height,c.backgroundColor&&(f.fillStyle=c.backgroundColor,n(d,e,f)),b(c,f)}function d(a){for(var b=e(a),d=0;d<b.length;d++)switch(c(b[d]),b[d].tagName){case"div":break;case"img":break;case"_innerText":f(b[d],a)}}function e(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;d++)b[d]=a[c[d]];return b}function f(a,b){var c=b[a.parents[a.parents.length-1]],d=a._innerText,e=c.style,f=c._hold_rect,g=f.left+e.borderLeftWidth+e.paddingLeft,i=f.top+e.borderTopWidth+e.paddingTop;console.log(e);var j=e.fontSize,k=e.fontFamily,l=e.color;u.font=j+"px "+k;for(var m=0,n=0;n<d.length;n++){var o=d[n],p=u.measureText(o).width;m+p>e.width&&(m=0,i+=j,g=f.left+e.borderLeftWidth+e.paddingLeft),h(o,{x:g,y:i,fontSize:j,fontFamily:k,fillStyle:l}),m+=p,g+=p}}function g(a,b){if(!r(a)&&!s(a))return console.log("%cFunction drawFont need param 1 to be string or number","color:red"),!1;u.save();var c={x:0,y:0,textAlign:"left",textBaseline:"top",fontSize:16,fontFamily:"Arial",lineWidth:1,strokeStyle:"#000"};b=b&&t(b)?q(c,b):c;var d=[b.x,b.y];return u.textAlign=b.textAlign,u.textBaseline=b.textBaseline,u.font=b.fontSize+"px "+b.fontFamily,u.strokeStyle=b.strokeStyle,u.strokeText(a,d[0],d[1]),u.restore(),this}function h(a,b){if(!r(a)&&!s(a))return console.log("%cFunction drawFont need param 1 to be string or number","color:red"),!1;u.save();var c={x:0,y:0,textAlign:"left",textBaseline:"top",fontSize:16,fontFamily:"Arial",lineWidth:1,strokeStyle:"#000",fillStyle:"#000"};b=b&&t(b)?q(c,b):c;var d=[b.x,b.y];return u.textAlign=b.textAlign,u.textBaseline=b.textBaseline,u.font=b.fontSize+"px "+b.fontFamily,u.fillStyle=b.fillStyle,u.fillText(a,d[0],d[1]),u.restore(),this}function i(a,b,c){u.save();var d={strokeStyle:"#000",lineWidth:1};c=q(d,c);var e=a,f=b;return u.beginPath(),u.moveTo(e[0],e[1]),u.lineTo(f[0],f[1]),u.strokeStyle=c.strokeStyle,u.lineWidth=c.lineWidth,u.stroke(),u.closePath(),u.restore(),this}function j(a,b,c,d){u.save();var e={strokeStyle:"#000",lineWidth:0};return d=q(e,d),0==d.lineWidth?this:(u.beginPath(),u.moveTo(a[0],a[1]),c?u.lineTo(a[0]+b,a[1]):u.lineTo(a[0],a[1]+b),u.strokeStyle=d.strokeStyle,u.lineWidth=d.lineWidth,u.stroke(),u.closePath(),u.restore(),this)}function k(a){var b={x:10,y:10,startAngle:0,endAngle:360,direction:!0,radius:10,strokeStyle:"#000",close:!1},c=q(b,a);u.strokeStyle=c.strokeStyle,u.save(),u.beginPath(),c.close&&u.moveTo(c.x,c.y),u.arc(c.x,c.y,c.radius,c.startAngle/180*Math.PI,c.endAngle/180*Math.PI,c.direction),c.close&&u.lineTo(c.x,c.y),u.stroke(),u.closePath(),u.restore()}function l(a){var b={x:10,y:10,startAngle:0,endAngle:360,direction:!0,radius:10,fillStyle:"#000",close:!1},c=q(b,a);u.strokeStyle=c.strokeStyle,u.save(),u.beginPath(),c.close||u.moveTo(c.x,c.y),u.arc(c.x,c.y,c.radius,c.startAngle/180*Math.PI,c.endAngle/180*Math.PI,c.direction),u.fill(),u.closePath(),u.restore()}function m(a,b,c){var d={strokeStyle:"#000",lineWidth:1},e=q(d,c);u.strokeStyle=e.strokeStyle,u.lineWidth=e.lineWidth,u.save(),u.beginPath(),u.rect(a[0],a[1],b[0]-a[0],b[1]-a[1]),u.stroke(),u.closePath(),u.restore()}function n(a,b,c){var d={fillStyle:"#000"},e=q(d,c);u.fillStyle=e.fillStyle,u.save(),u.beginPath(),u.rect(a[0],a[1],b[0]-a[0],b[1]-a[1]),u.fill(),u.closePath(),u.restore()}function o(a,b,c){var d={onDrawed:function(){},width:0,height:0},e=q(d,c),f=new Image;f.src=a,f.onload=function(){var a=1,c=1;e.width&&e.height?(a=e.width/f.width,c=e.height/f.height):e.width&&!e.height?a=c=e.width/f.width:!e.width&&e.height&&(a=c=e.height/f.height),u.save(),u.scale(a,c),u.beginPath(),u.drawImage(f,b[0]/a,b[1]/c),u.closePath(),u.restore(),e.onDrawed(f)}}function p(){u.save(),u.fillStyle=a.settings.canvasBg,u.fillRect(0,0,v,w),u.restore()}var q=b.extend,r=b.isString,s=b.isNum,t=b.isObj,u=(b.isFn,b.isArray,b.isDot,null),v=null,w=null;a.painter=function(a,b,c){u=a,v=b,w=c},a.painter.stroke_line=i,a.painter.stroke_font=g,a.painter.fill_font=h,a.painter.stroke_circle=k,a.painter.fill_circle=l,a.painter.stroke_rect=m,a.painter.fill_rect=n,a.painter.draw_image=o,a.painter.clear=p,a.painter.paint_bgColor_and_border=c,a.painter.render=d}(Ycc,Ycc.utils),function(a,b,c){function d(b,d,e){function f(){b.save(),b.fillStyle=a.settings.canvasBg,b.fillRect(0,0,d,e),b.restore(),c(b,d,e)}return l=b,m=d,n=e,b&&d&&e?(this.init=f,this.init(),this.clear=function(){b.save(),b.fillStyle=a.settings.canvasBg,b.fillRect(0,0,d,e),b.restore()},this.getTextW=function(a){return b.measureText(a).width},void(this.render=j)):(console.log("%cCan not get the id","color:red"),!1)}function e(a,b){return b?k(p[a]):p[a]}function f(a,b){var c=[],d=p[a].children,e=d.length;if(e>0)for(var f=0;e>f;f++)b?c.push(k(p[d[f]])):c.push(p[d[f]]);return c}function g(a,b){var c=[],d=p[a].parents,e=d.length;if(e>0)for(var f=0;e>f;f++)b?c.push(k(p[d[f]])):c.push(p[d[f]]);return c}function h(a,b){var c=null,d=p[a].parents,e=d.length;return e>0&&(c=b?k(d[e-1]):d[e-1]),c}function i(a,b){var c=[];for(var d in p)d.tagName==a&&(b?c.push(k(d)):c.push(d));return c}function j(a,b){o=b,p=a,c.render(a)}var k=(b.extend,b.deepClone),l=(b.isString,b.isNum,b.isObj,b.isFn,b.isArray,b.isDot,null),m=null,n=null,o=0,p={};a.App=d,a.App.getNodeAttrById=e,a.App.getChildrenAttr=f,a.App.getPatentsAttr=g,a.App.getNodeAttrByTagName=i,a.App.getNodeAttrById=e,a.App.getNodeAttrById=e,a.App.getPatentAttr=h}(Ycc,Ycc.utils,Ycc.painter);