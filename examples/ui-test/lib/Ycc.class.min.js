!function(a){a.Ycc=function b(){this.canvasDom=null,this.ctx=null,this.layerList=[],this.photoManager=null,this.layerManager=null,this.ticker=null,this.loader=new b.Loader,this.baseUI=null},a.Ycc.prototype.getStageWidth=function(){return this.ctx.canvas.width},a.Ycc.prototype.getStageHeight=function(){return this.ctx.canvas.height},a.Ycc.prototype.bindCanvas=function(a){this.canvasDom=a,this.ctx=this.canvasDom.getContext("2d"),this.layerList=[],this.photoManager=new Ycc.PhotoManager(this),this.layerManager=new Ycc.LayerManager(this),this.ticker=new Ycc.Ticker(this),this.baseUI=new Ycc.UI(this.ctx.canvas),this.init()},a.Ycc.prototype.init=function(){this._initStageEvent()},a.Ycc.prototype._initStageEvent=function(){for(var a=this,b=["mousemove","mousedown","mouseup","click","mouseenter","mouseout"],c=0;c<b.length;c++)this.ctx.canvas.addEventListener(b[c],function(b){for(var c=new Ycc.Event({type:b.type,x:parseInt(b.clientX-a.ctx.canvas.getBoundingClientRect().left),y:parseInt(b.clientY-a.ctx.canvas.getBoundingClientRect().top)}),d=a.layerList.length-1;d>=0;d--){var e=a.layerList[d];e.enableEventManager&&e.triggerListener(b.type,c)}});this.ctx.canvas.addEventListener("mousemove",function(b){for(var c,d=parseInt(b.clientX-a.ctx.canvas.getBoundingClientRect().left),e=parseInt(b.clientY-a.ctx.canvas.getBoundingClientRect().top),f=null,g=a.layerList.length-1;g>=0;g--){var h=a.layerList[g];if(f=h.getUIFromPointer(new Ycc.Math.Dot(d,e)),null!==f&&null!==f)break}null!==f?f===this.___overUI?(c=new Ycc.Event({type:"mouseover",x:d,y:e}),f.triggerListener("mouseover",c)):(c=new Ycc.Event({type:"mouseout",x:d,y:e}),this.___overUI&&this.___overUI.triggerListener("mouseout",c),this.___overUI=f):this.___overUI&&(c=new Ycc.Event({type:"mouseout",x:d,y:e}),this.___overUI.triggerListener("mouseout",c),this.___overUI=null)}),this.ctx.canvas.addEventListener("mouseout",function(b){var c=new Ycc.Event({type:"mouseup",x:parseInt(b.clientX-a.ctx.canvas.getBoundingClientRect().left),y:parseInt(b.clientY-a.ctx.canvas.getBoundingClientRect().top)});c.x>parseInt(this.width)&&(c.x=parseInt(this.width)),c.x<0&&(c.x=0),c.y>parseInt(this.height)&&(c.y=parseInt(this.height)),c.y<0&&(c.y=0);for(var d=a.layerList.length-1;d>=0;d--){var e=a.layerList[d];e.enableEventManager&&e.triggerListener(c.type,c)}})},a.Ycc.prototype.clearStage=function(){this.ctx.clearRect(0,0,this.getStageWidth(),this.getStageHeight())},a.Ycc.prototype.reRenderStage=function(){this.clearStage(),this.layerManager.renderAllLayerToStage()}}(window);
//# sourceMappingURL=Ycc.class.min.js.map