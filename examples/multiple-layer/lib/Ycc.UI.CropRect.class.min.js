!function(a){a.UI.CropRect=function(b){a.UI.Base.call(this,b),this.ctrlSize=6,this.fill=!0,this.ctrlRect1=new a.Math.Rect,this.ctrlRect2=new a.Math.Rect,this.ctrlRect3=new a.Math.Rect,this.ctrlRect4=new a.Math.Rect,this.extend(b),this._initUI()},a.UI.CropRect.prototype=new a.UI.Base,a.UI.CropRect.prototype.constructor=a.UI.CropRect,a.UI.CropRect.prototype.computeUIProps=function(){var b=this.rect;this.ctrlRect1=new a.Math.Rect(b.x,b.y,this.ctrlSize,this.ctrlSize),this.ctrlRect2=new a.Math.Rect(b.x+b.width-this.ctrlSize,b.y,this.ctrlSize,this.ctrlSize),this.ctrlRect3=new a.Math.Rect(b.x,b.y+b.height-this.ctrlSize,this.ctrlSize,this.ctrlSize),this.ctrlRect4=new a.Math.Rect(b.x+b.width-this.ctrlSize,b.y+b.height-this.ctrlSize,this.ctrlSize,this.ctrlSize)},a.UI.CropRect.prototype._initUI=function(){this.userData=this.userData?this.userData:{},this.addListener("dragstart",function(b){this.userData.ctrlStart=0,this.userData.dragStartPosition=new a.Math.Rect(this.rect);for(var c=new a.Math.Dot(b),d=1;d<=4;d++)if(c.isInRect(this["ctrlRect"+d]))return this.userData.ctrlStart=d,null}),this.addListener("dragging",function(a){var b,c,d,e,f=this.userData.dragStartPosition;this.userData.ctrlStart<=4&&this.userData.ctrlStart>=1?(1===this.userData.ctrlStart&&(b=a.x,c=a.y,d=f.width-(a.x-f.x),e=f.height-(a.y-f.y),b<=f.x+f.width-2*this.ctrlSize&&(this.rect.x=b),c<=f.y+f.height-2*this.ctrlSize&&(this.rect.y=c)),2===this.userData.ctrlStart&&(b=f.x,c=a.y,d=a.x-f.x,e=f.height-(a.y-f.y),this.rect.x=b,c<=f.y+f.height-2*this.ctrlSize&&(this.rect.y=c)),3===this.userData.ctrlStart&&(b=a.x,c=f.y,d=f.width-(a.x-f.x),e=a.y-f.y,b<=f.x+f.width-2*this.ctrlSize&&(this.rect.x=b),this.rect.y=c),4===this.userData.ctrlStart&&(this.rect.x=f.x,this.rect.y=f.y,this.rect.width=a.x-f.x,this.rect.height=a.y-f.y),d>=2*this.ctrlSize&&(this.rect.width=d),e>=2*this.ctrlSize&&(this.rect.height=e)):(this.rect.x=a.x-a.mouseDownYccEvent.targetDeltaPosition.x,this.rect.y=a.y-a.mouseDownYccEvent.targetDeltaPosition.y),this.rect.width<=2*this.ctrlSize&&(this.rect.width=2*this.ctrlSize),this.rect.height<=2*this.ctrlSize&&(this.rect.height=2*this.ctrlSize),this.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()})},a.UI.CropRect.prototype.render=function(){this.renderRectBgColor();var a=this.rect;this.ctx.save(),this.ctx.fillStyle=this.fillStyle,this.ctx.strokeStyle=this.strokeStyle,this.ctx.beginPath(),this.ctx.rect(a.x,a.y,a.width,a.height),this.ctx.closePath(),this.fill?this.ctx.fill():this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.ctrlRect1.x,this.ctrlRect1.y,this.ctrlRect1.width,this.ctrlRect1.height),this.ctx.rect(this.ctrlRect2.x,this.ctrlRect2.y,this.ctrlRect2.width,this.ctrlRect2.height),this.ctx.rect(this.ctrlRect3.x,this.ctrlRect3.y,this.ctrlRect3.width,this.ctrlRect3.height),this.ctx.rect(this.ctrlRect4.x,this.ctrlRect4.y,this.ctrlRect4.width,this.ctrlRect4.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}}(window.Ycc);
//# sourceMappingURL=Ycc.UI.CropRect.class.min.js.map