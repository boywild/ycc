!function(a){a.Timer=function(a){this.yccInstance=a,this.startTime=Date.now(),this.lastFrameTime=0,this.frameListenerList=[],this.frameRate=100,this.realTimeFrameRate=this.frameRate,this.frameAllCount=0,this.timerTickCount=0},a.Timer.prototype.start=function(){function a(){var e=0===b.timerTickCount?b.startTime:Date.now();b.timerTickCount++;var f=e-b.startTime,g=b.frameAllCount*c;f>g&&(b.frameAllCount++,b.realTimeFrameRate=1e3*b.frameAllCount/(e-b.startTime),b.broadcastFrameEvent(),b.broadcastToLayer(),console.log("总帧率： ",b.realTimeFrameRate),b.lastFrameTime=Date.now()),d.call(window,a)}var b=this,c=1e3/b.frameRate,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;b.frameAllCount=0,d||(d=function(a){return window.setTimeout(a,1e3/60)}),b.startTime=Date.now(),d.call(window,a)},a.Timer.prototype.addFrameListener=function(a){this.frameListenerList.push(a)},a.Timer.prototype.broadcastFrameEvent=function(){for(var b=0;b<this.frameListenerList.length;b++){var c=this.frameListenerList[b];a.utils.isFn(c)&&c()}},a.Timer.prototype.broadcastToLayer=function(){for(var a=0;a<this.yccInstance.layerList.length;a++){var b=this.yccInstance.layerList[a];b.show&&b.enableFrameEvent&&b.update()}}}(window.Ycc);
//# sourceMappingURL=Ycc.Timer.class.min.js.map